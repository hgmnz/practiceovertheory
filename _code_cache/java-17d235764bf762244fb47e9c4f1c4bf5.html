<div class="highlight"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">postData</span><span class="o">(</span><span class="n">String</span> <span class="n">target</span><span class="o">,</span> <span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;About to post\nURL: &quot;</span><span class="o">+</span><span class="n">target</span><span class="o">+</span> <span class="s">&quot;content: &quot;</span> <span class="o">+</span> <span class="n">content</span><span class="o">);</span>
  <span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
  <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
  <span class="n">URLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
  <span class="c1">// Set connection parameters.</span>
  <span class="n">conn</span><span class="o">.</span><span class="na">setDoInput</span> <span class="o">(</span><span class="kc">true</span><span class="o">);</span>
  <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span> <span class="o">(</span><span class="kc">true</span><span class="o">);</span>
  <span class="n">conn</span><span class="o">.</span><span class="na">setUseCaches</span> <span class="o">(</span><span class="kc">false</span><span class="o">);</span>
  <span class="c1">// Make server believe we are form data...</span>
  <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">&quot;Content-Type&quot;</span><span class="o">,</span> <span class="s">&quot;application/x-www-form-urlencoded&quot;</span><span class="o">);</span>
  <span class="n">DataOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span> <span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span> <span class="o">());</span>
  <span class="c1">// Write out the bytes of the content string to the stream.</span>
  <span class="n">out</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">flush</span> <span class="o">();</span>
  <span class="n">out</span><span class="o">.</span><span class="na">close</span> <span class="o">();</span>
  <span class="c1">// Read response from the input stream.</span>
  <span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span> <span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span> <span class="o">()));</span>
  <span class="n">String</span> <span class="n">temp</span><span class="o">;</span>
  <span class="k">while</span> <span class="o">((</span><span class="n">temp</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
    <span class="n">response</span> <span class="o">+=</span> <span class="n">temp</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
   <span class="o">}</span>
  <span class="n">temp</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">in</span><span class="o">.</span><span class="na">close</span> <span class="o">();</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Server response:\n&#39;&quot;</span> <span class="o">+</span> <span class="n">response</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span><span class="o">);</span>
  <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
